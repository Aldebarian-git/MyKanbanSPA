(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const m of n)if(m.type==="childList")for(const L of m.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&l(L)}).observe(document,{childList:!0,subtree:!0});function c(n){const m={};return n.integrity&&(m.integrity=n.integrity),n.referrerPolicy&&(m.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?m.credentials="include":n.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(n){if(n.ep)return;n.ep=!0;const m=c(n);fetch(n.href,m)}})();const v={init(){document.querySelectorAll(".close").forEach(o=>{o.addEventListener("click",()=>v.close())})},open(o){document.querySelector(o).showModal()},close(o="dialog[open]"){const a=document.querySelector(o);a?a.close():console.error(`Modal non trouvé avec le sélecteur : ${o}`)}},h={baseUrl:"https://mykanbanapi-production.up.railway.app",async getLists(){try{const o=await fetch(h.baseUrl+"/lists");return o.ok?await o.json():(console.error(o),null)}catch(o){return console.error(o),null}},async createList(o){try{const a=await fetch(h.baseUrl+"/lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return a.ok?await a.json():(console.error(a),null)}catch(a){return console.error(a),null}},async updateList(o,a){try{const c=await fetch(h.baseUrl+`/lists/${o}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return c.ok?await c.json():(console.error(c),null)}catch(c){return console.error(c),null}},async deleteList(o){try{const a=await fetch(h.baseUrl+`/lists/${o}`,{method:"DELETE"});if(!a.ok)return console.error(a),null}catch(a){return console.error(a),null}},async deleteCard(o){try{const a=await fetch(h.baseUrl+`/cards/${o}`,{method:"DELETE"});if(!a.ok)return console.error(a),null}catch(a){return console.error(a),null}},async createCard(o){try{const a=await fetch(h.baseUrl+"/cards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return a.ok?await a.json():(console.error(a),null)}catch(a){return console.error(a),null}},async updateCard(o,a){try{const c=await fetch(h.baseUrl+`/cards/${o}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return c.ok?await c.json():(console.log(o,a),console.error(c),null)}catch(c){return console.error(c),null}}};var A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function F(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var x={exports:{}},z=x.exports,R;function X(){return R||(R=1,function(o,a){(function(c,l){o.exports=l(c)})(typeof A<"u"?A:window||z.window||z.global,function(c){var l={},n="iziToast";document.querySelector("body");var m=!!/Mobi/.test(navigator.userAgent),L=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),q=typeof InstallTrigger<"u",I="ontouchstart"in document.documentElement,M=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],k={info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},S=568,T={};l.children={};var N={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"bottomRight",target:"",targetFirst:!0,timeout:5e3,rtl:!1,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof window.CustomEvent!="function"){var D=function(r,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(r,i.bubbles,i.cancelable,i.detail),e};D.prototype=window.Event.prototype,window.CustomEvent=D}var b=function(r,i,e){if(Object.prototype.toString.call(r)==="[object Object]")for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&i.call(e,r[t],t,r);else if(r)for(var d=0,f=r.length;d<f;d++)i.call(e,r[d],d,r)},C=function(r,i){var e={};return b(r,function(t,d){e[d]=r[d]}),b(i,function(t,d){e[d]=i[d]}),e},O=function(r){var i=document.createDocumentFragment(),e=document.createElement("div");for(e.innerHTML=r;e.firstChild;)i.appendChild(e.firstChild);return i},j=function(r){var i=btoa(encodeURIComponent(r));return i.replace(/=/g,"")},U=function(r){return r.substring(0,1)=="#"||r.substring(0,3)=="rgb"||r.substring(0,3)=="hsl"},W=function(r){try{return btoa(atob(r))==r}catch{return!1}},E=function(){return{move:function(r,i,e,t){var d,f=.3,s=180;t!==0&&(r.classList.add(n+"-dragged"),r.style.transform="translateX("+t+"px)",t>0?(d=(s-t)/s,d<f&&i.hide(C(e,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),r,"drag")):(d=(s+t)/s,d<f&&i.hide(C(e,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),r,"drag")),r.style.opacity=d,d<f&&((L||q)&&(r.style.left=t+"px"),r.parentNode.style.opacity=f,this.stopMoving(r,null)))},startMoving:function(r,i,e,t){t=t||window.event;var d=I?t.touches[0].clientX:t.clientX,f=r.style.transform.replace("px)","");f=f.replace("translateX(","");var s=d-f;e.transitionIn&&r.classList.remove(e.transitionIn),e.transitionInMobile&&r.classList.remove(e.transitionInMobile),r.style.transition="",I?document.ontouchmove=function(u){u.preventDefault(),u=u||window.event;var p=u.touches[0].clientX,g=p-s;E.move(r,i,e,g)}:document.onmousemove=function(u){u.preventDefault(),u=u||window.event;var p=u.clientX,g=p-s;E.move(r,i,e,g)}},stopMoving:function(r,i){I?document.ontouchmove=function(){}:document.onmousemove=function(){},r.style.opacity="",r.style.transform="",r.classList.contains(n+"-dragged")&&(r.classList.remove(n+"-dragged"),r.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout(function(){r.style.transition=""},400))}}}();return l.setSetting=function(r,i,e){l.children[r][i]=e},l.getSetting=function(r,i){return l.children[r][i]},l.destroy=function(){b(document.querySelectorAll("."+n+"-overlay"),function(r,i){r.remove()}),b(document.querySelectorAll("."+n+"-wrapper"),function(r,i){r.remove()}),b(document.querySelectorAll("."+n),function(r,i){r.remove()}),this.children={},document.removeEventListener(n+"-opened",{},!1),document.removeEventListener(n+"-opening",{},!1),document.removeEventListener(n+"-closing",{},!1),document.removeEventListener(n+"-closed",{},!1),document.removeEventListener("keyup",{},!1),T={}},l.settings=function(r){l.destroy(),T=r,N=C(N,r||{})},b(k,function(r,i){l[i]=function(e){var t=C(T,e||{});t=C(r,t||{}),this.show(t)}}),l.progress=function(r,i,e){var t=this,d=i.getAttribute("data-iziToast-ref"),f=C(this.children[d],r||{}),s=i.querySelector("."+n+"-progressbar div");return{start:function(){typeof f.time.REMAINING>"u"&&(i.classList.remove(n+"-reseted"),s!==null&&(s.style.transition="width "+f.timeout+"ms "+f.progressBarEasing,s.style.width="0%"),f.time.START=new Date().getTime(),f.time.END=f.time.START+f.timeout,f.time.TIMER=setTimeout(function(){clearTimeout(f.time.TIMER),i.classList.contains(n+"-closing")||(t.hide(f,i,"timeout"),typeof e=="function"&&e.apply(t))},f.timeout),t.setSetting(d,"time",f.time))},pause:function(){if(typeof f.time.START<"u"&&!i.classList.contains(n+"-paused")&&!i.classList.contains(n+"-reseted")){if(i.classList.add(n+"-paused"),f.time.REMAINING=f.time.END-new Date().getTime(),clearTimeout(f.time.TIMER),t.setSetting(d,"time",f.time),s!==null){var u=window.getComputedStyle(s),p=u.getPropertyValue("width");s.style.transition="none",s.style.width=p}typeof e=="function"&&setTimeout(function(){e.apply(t)},10)}},resume:function(){typeof f.time.REMAINING<"u"?(i.classList.remove(n+"-paused"),s!==null&&(s.style.transition="width "+f.time.REMAINING+"ms "+f.progressBarEasing,s.style.width="0%"),f.time.END=new Date().getTime()+f.time.REMAINING,f.time.TIMER=setTimeout(function(){clearTimeout(f.time.TIMER),i.classList.contains(n+"-closing")||(t.hide(f,i,"timeout"),typeof e=="function"&&e.apply(t))},f.time.REMAINING),t.setSetting(d,"time",f.time)):this.start()},reset:function(){clearTimeout(f.time.TIMER),delete f.time.REMAINING,t.setSetting(d,"time",f.time),i.classList.add(n+"-reseted"),i.classList.remove(n+"-paused"),s!==null&&(s.style.transition="none",s.style.width="100%"),typeof e=="function"&&setTimeout(function(){e.apply(t)},10)}}},l.hide=function(r,i,e){typeof i!="object"&&(i=document.querySelector(i));var t=this,d=C(this.children[i.getAttribute("data-iziToast-ref")],r||{});d.closedBy=e||null,delete d.time.REMAINING,i.classList.add(n+"-closing"),function(){var u=document.querySelector("."+n+"-overlay");if(u!==null){var p=u.getAttribute("data-iziToast-ref");p=p.split(",");var g=p.indexOf(String(d.ref));g!==-1&&p.splice(g,1),u.setAttribute("data-iziToast-ref",p.join()),p.length===0&&(u.classList.remove("fadeIn"),u.classList.add("fadeOut"),setTimeout(function(){u.remove()},700))}}(),d.transitionIn&&i.classList.remove(d.transitionIn),d.transitionInMobile&&i.classList.remove(d.transitionInMobile),m||window.innerWidth<=S?d.transitionOutMobile&&i.classList.add(d.transitionOutMobile):d.transitionOut&&i.classList.add(d.transitionOut);var f=i.parentNode.offsetHeight;i.parentNode.style.height=f+"px",i.style.pointerEvents="none",(!m||window.innerWidth>S)&&(i.parentNode.style.transitionDelay="0.2s");try{var s=new CustomEvent(n+"-closing",{detail:d,bubbles:!0,cancelable:!0});document.dispatchEvent(s)}catch(u){console.warn(u)}setTimeout(function(){i.parentNode.style.height="0px",i.parentNode.style.overflow="",setTimeout(function(){delete t.children[d.ref],i.parentNode.remove();try{var u=new CustomEvent(n+"-closed",{detail:d,bubbles:!0,cancelable:!0});document.dispatchEvent(u)}catch(p){console.warn(p)}typeof d.onClosed<"u"&&d.onClosed.apply(null,[d,i,e])},1e3)},200),typeof d.onClosing<"u"&&d.onClosing.apply(null,[d,i,e])},l.show=function(r){var i=this,e=C(T,r||{});if(e=C(N,e),e.time={},e.id===null&&(e.id=j(e.title+e.message+e.color)),e.displayMode===1||e.displayMode=="once")try{if(document.querySelectorAll("."+n+"#"+e.id).length>0)return!1}catch{console.warn("["+n+"] Could not find an element with this selector: #"+e.id+". Try to set an valid id.")}if(e.displayMode===2||e.displayMode=="replace")try{b(document.querySelectorAll("."+n+"#"+e.id),function(s,u){i.hide(e,s,"replaced")})}catch{console.warn("["+n+"] Could not find an element with this selector: #"+e.id+". Try to set an valid id.")}e.ref=new Date().getTime()+Math.floor(Math.random()*1e7+1),l.children[e.ref]=e;var t={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:e.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};t.toast.setAttribute("data-iziToast-ref",e.ref),t.toast.appendChild(t.toastBody),t.toastCapsule.appendChild(t.toast),function(){if(t.toast.classList.add(n),t.toast.classList.add(n+"-opening"),t.toastCapsule.classList.add(n+"-capsule"),t.toastBody.classList.add(n+"-body"),t.toastTexts.classList.add(n+"-texts"),m||window.innerWidth<=S?e.transitionInMobile&&t.toast.classList.add(e.transitionInMobile):e.transitionIn&&t.toast.classList.add(e.transitionIn),e.class){var s=e.class.split(" ");b(s,function(u,p){t.toast.classList.add(u)})}e.id&&(t.toast.id=e.id),e.rtl&&(t.toast.classList.add(n+"-rtl"),t.toast.setAttribute("dir","rtl")),e.layout>1&&t.toast.classList.add(n+"-layout"+e.layout),e.balloon&&t.toast.classList.add(n+"-balloon"),e.maxWidth&&(isNaN(e.maxWidth)?t.toast.style.maxWidth=e.maxWidth:t.toast.style.maxWidth=e.maxWidth+"px"),(e.theme!==""||e.theme!=="light")&&t.toast.classList.add(n+"-theme-"+e.theme),e.color&&(U(e.color)?t.toast.style.background=e.color:t.toast.classList.add(n+"-color-"+e.color)),e.backgroundColor&&(t.toast.style.background=e.backgroundColor,e.balloon&&(t.toast.style.borderColor=e.backgroundColor))}(),function(){e.image&&(t.cover.classList.add(n+"-cover"),t.cover.style.width=e.imageWidth+"px",W(e.image.replace(/ /g,""))?t.cover.style.backgroundImage="url(data:image/png;base64,"+e.image.replace(/ /g,"")+")":t.cover.style.backgroundImage="url("+e.image+")",e.rtl?t.toastBody.style.marginRight=e.imageWidth+10+"px":t.toastBody.style.marginLeft=e.imageWidth+10+"px",t.toast.appendChild(t.cover))}(),function(){e.close?(t.buttonClose=document.createElement("button"),t.buttonClose.type="button",t.buttonClose.classList.add(n+"-close"),t.buttonClose.addEventListener("click",function(s){s.target,i.hide(e,t.toast,"button")}),t.toast.appendChild(t.buttonClose)):e.rtl?t.toast.style.paddingLeft="18px":t.toast.style.paddingRight="18px"}(),function(){e.progressBar&&(t.progressBar=document.createElement("div"),t.progressBarDiv=document.createElement("div"),t.progressBar.classList.add(n+"-progressbar"),t.progressBarDiv.style.background=e.progressBarColor,t.progressBar.appendChild(t.progressBarDiv),t.toast.appendChild(t.progressBar)),e.timeout&&(e.pauseOnHover&&!e.resetOnHover&&(t.toast.addEventListener("mouseenter",function(s){i.progress(e,t.toast).pause()}),t.toast.addEventListener("mouseleave",function(s){i.progress(e,t.toast).resume()})),e.resetOnHover&&(t.toast.addEventListener("mouseenter",function(s){i.progress(e,t.toast).reset()}),t.toast.addEventListener("mouseleave",function(s){i.progress(e,t.toast).start()})))}(),function(){e.iconUrl?(t.icon.setAttribute("class",n+"-icon"),t.icon.setAttribute("src",e.iconUrl)):e.icon&&(t.icon.setAttribute("class",n+"-icon "+e.icon),e.iconText&&t.icon.appendChild(document.createTextNode(e.iconText)),e.iconColor&&(t.icon.style.color=e.iconColor)),(e.icon||e.iconUrl)&&(e.rtl?t.toastBody.style.paddingRight="33px":t.toastBody.style.paddingLeft="33px",t.toastBody.appendChild(t.icon))}(),function(){e.title.length>0&&(t.strong=document.createElement("strong"),t.strong.classList.add(n+"-title"),t.strong.appendChild(O(e.title)),t.toastTexts.appendChild(t.strong),e.titleColor&&(t.strong.style.color=e.titleColor),e.titleSize&&(isNaN(e.titleSize)?t.strong.style.fontSize=e.titleSize:t.strong.style.fontSize=e.titleSize+"px"),e.titleLineHeight&&(isNaN(e.titleSize)?t.strong.style.lineHeight=e.titleLineHeight:t.strong.style.lineHeight=e.titleLineHeight+"px")),e.message.length>0&&(t.p=document.createElement("p"),t.p.classList.add(n+"-message"),t.p.appendChild(O(e.message)),t.toastTexts.appendChild(t.p),e.messageColor&&(t.p.style.color=e.messageColor),e.messageSize&&(isNaN(e.titleSize)?t.p.style.fontSize=e.messageSize:t.p.style.fontSize=e.messageSize+"px"),e.messageLineHeight&&(isNaN(e.titleSize)?t.p.style.lineHeight=e.messageLineHeight:t.p.style.lineHeight=e.messageLineHeight+"px")),e.title.length>0&&e.message.length>0&&(e.rtl?t.strong.style.marginLeft="10px":e.layout!==2&&!e.rtl&&(t.strong.style.marginRight="10px"))}(),t.toastBody.appendChild(t.toastTexts);var d;(function(){e.inputs.length>0&&(t.inputs.classList.add(n+"-inputs"),b(e.inputs,function(s,u){t.inputs.appendChild(O(s[0])),d=t.inputs.childNodes,d[u].classList.add(n+"-inputs-child"),s[3]&&setTimeout(function(){d[u].focus()},300),d[u].addEventListener(s[1],function(p){var g=s[2];return g(i,t.toast,this,p)})}),t.toastBody.appendChild(t.inputs))})(),function(){e.buttons.length>0&&(t.buttons.classList.add(n+"-buttons"),b(e.buttons,function(s,u){t.buttons.appendChild(O(s[0]));var p=t.buttons.childNodes;p[u].classList.add(n+"-buttons-child"),s[2]&&setTimeout(function(){p[u].focus()},300),p[u].addEventListener("click",function(g){g.preventDefault();var P=s[1];return P(i,t.toast,this,g,d)})})),t.toastBody.appendChild(t.buttons)}(),e.message.length>0&&(e.inputs.length>0||e.buttons.length>0)&&(t.p.style.marginBottom="0"),(e.inputs.length>0||e.buttons.length>0)&&(e.rtl?t.toastTexts.style.marginLeft="10px":t.toastTexts.style.marginRight="10px",e.inputs.length>0&&e.buttons.length>0&&(e.rtl?t.inputs.style.marginLeft="8px":t.inputs.style.marginRight="8px")),function(){t.toastCapsule.style.visibility="hidden",setTimeout(function(){var s=t.toast.offsetHeight,u=t.toast.currentStyle||window.getComputedStyle(t.toast),p=u.marginTop;p=p.split("px"),p=parseInt(p[0]);var g=u.marginBottom;g=g.split("px"),g=parseInt(g[0]),t.toastCapsule.style.visibility="",t.toastCapsule.style.height=s+g+p+"px",setTimeout(function(){t.toastCapsule.style.height="auto",e.target&&(t.toastCapsule.style.overflow="visible")},500),e.timeout&&i.progress(e,t.toast).start()},100)}(),function(){var s=e.position;if(e.target)t.wrapper=document.querySelector(e.target),t.wrapper.classList.add(n+"-target"),e.targetFirst?t.wrapper.insertBefore(t.toastCapsule,t.wrapper.firstChild):t.wrapper.appendChild(t.toastCapsule);else{if(M.indexOf(e.position)==-1){console.warn("["+n+`] Incorrect position.
It can be › `+M);return}m||window.innerWidth<=S?e.position=="bottomLeft"||e.position=="bottomRight"||e.position=="bottomCenter"?s=n+"-wrapper-bottomCenter":e.position=="topLeft"||e.position=="topRight"||e.position=="topCenter"?s=n+"-wrapper-topCenter":s=n+"-wrapper-center":s=n+"-wrapper-"+s,t.wrapper=document.querySelector("."+n+"-wrapper."+s),t.wrapper||(t.wrapper=document.createElement("div"),t.wrapper.classList.add(n+"-wrapper"),t.wrapper.classList.add(s),document.body.appendChild(t.wrapper)),e.position=="topLeft"||e.position=="topCenter"||e.position=="topRight"?t.wrapper.insertBefore(t.toastCapsule,t.wrapper.firstChild):t.wrapper.appendChild(t.toastCapsule)}isNaN(e.zindex)?console.warn("["+n+"] Invalid zIndex."):t.wrapper.style.zIndex=e.zindex}(),function(){e.overlay&&(document.querySelector("."+n+"-overlay.fadeIn")!==null?(t.overlay=document.querySelector("."+n+"-overlay"),t.overlay.setAttribute("data-iziToast-ref",t.overlay.getAttribute("data-iziToast-ref")+","+e.ref),!isNaN(e.zindex)&&e.zindex!==null&&(t.overlay.style.zIndex=e.zindex-1)):(t.overlay.classList.add(n+"-overlay"),t.overlay.classList.add("fadeIn"),t.overlay.style.background=e.overlayColor,t.overlay.setAttribute("data-iziToast-ref",e.ref),!isNaN(e.zindex)&&e.zindex!==null&&(t.overlay.style.zIndex=e.zindex-1),document.querySelector("body").appendChild(t.overlay)),e.overlayClose?(t.overlay.removeEventListener("click",{}),t.overlay.addEventListener("click",function(s){i.hide(e,t.toast,"overlay")})):t.overlay.removeEventListener("click",{}))}(),function(){if(e.animateInside){t.toast.classList.add(n+"-animateInside");var s=[200,100,300];(e.transitionIn=="bounceInLeft"||e.transitionIn=="bounceInRight")&&(s=[400,200,400]),e.title.length>0&&setTimeout(function(){t.strong.classList.add("slideIn")},s[0]),e.message.length>0&&setTimeout(function(){t.p.classList.add("slideIn")},s[1]),(e.icon||e.iconUrl)&&setTimeout(function(){t.icon.classList.add("revealIn")},s[2]);var u=150;e.buttons.length>0&&t.buttons&&setTimeout(function(){b(t.buttons.childNodes,function(p,g){setTimeout(function(){p.classList.add("revealIn")},u),u=u+150})},e.inputs.length>0?150:0),e.inputs.length>0&&t.inputs&&(u=150,b(t.inputs.childNodes,function(p,g){setTimeout(function(){p.classList.add("revealIn")},u),u=u+150}))}}(),e.onOpening.apply(null,[e,t.toast]);try{var f=new CustomEvent(n+"-opening",{detail:e,bubbles:!0,cancelable:!0});document.dispatchEvent(f)}catch(s){console.warn(s)}setTimeout(function(){t.toast.classList.remove(n+"-opening"),t.toast.classList.add(n+"-opened");try{var s=new CustomEvent(n+"-opened",{detail:e,bubbles:!0,cancelable:!0});document.dispatchEvent(s)}catch(u){console.warn(u)}e.onOpened.apply(null,[e,t.toast])},1e3),e.drag&&(I?(t.toast.addEventListener("touchstart",function(s){E.startMoving(this,i,e,s)},!1),t.toast.addEventListener("touchend",function(s){E.stopMoving(this,s)},!1)):(t.toast.addEventListener("mousedown",function(s){s.preventDefault(),E.startMoving(this,i,e,s)},!1),t.toast.addEventListener("mouseup",function(s){s.preventDefault(),E.stopMoving(this,s)},!1))),e.closeOnEscape&&document.addEventListener("keyup",function(s){s=s||window.event,s.keyCode==27&&i.hide(e,t.toast,"esc")}),e.closeOnClick&&t.toast.addEventListener("click",function(s){i.hide(e,t.toast,"toast")}),i.toast=t.toast},l})}(x)),x.exports}var G=X();const w=F(G),y={init(){w.settings({position:"topRight",timeout:5e3})},success(o){w.success({title:"Succès",message:o})},error(o){w.error({title:"Erreur",message:o})},warning(o){w.warning({title:"Attention",message:o})},info(o){w.info({title:"Information",message:o})}},H={init(){this.bind()},bind(){document.querySelector("#add-card-modal form").addEventListener("submit",o=>{o.preventDefault(),this.handleAddCard(o)}),document.querySelector("#edit-card-modal form").addEventListener("submit",o=>{o.preventDefault(),this.handleEditCard(o)}),document.querySelector("#delete-card-modal form").addEventListener("submit",o=>{o.preventDefault(),this.handleDeleteCard(o)})},async handleAddCard(o){const a=o.currentTarget,c=Object.fromEntries(new FormData(a)),l=document.querySelector("#add-card-modal").dataset.listId;if(c.list_id=l,!c.content||c.content===""){y.error("Veuillez saisir un contenu pour la carte !");return}if(!l){y.error("Impossible de créer la carte !");return}const n=await h.createCard(c);if(n===null){y.error("Impossible de créer la carte !");return}this.addCardToListOnDOM(n),a.reset(),v.close("#add-card-modal"),y.success("Carte créée !")},async handleDeleteCard(o){if(o.currentTarget){const c=document.querySelector("#delete-card-modal").dataset.cardId;if(await h.deleteCard(c)===null){y.error("Impossible de supprimer la carte !");return}const n=document.querySelector(`[data-card-id="${c}"]`);n&&n.remove(),v.close("#delete-card-modal"),y.success("Carte supprimée !")}},async handleEditCard(o){const a=o.currentTarget,c=document.querySelector("#edit-card-modal").dataset.cardId,l=Object.fromEntries(new FormData(a));if(!l.content||l.content===""){y.error("Veuillez saisir un contenu pour la carte !");return}if(await h.updateCard(c,l)===null){y.error("Impossible de modifier la carte !");return}document.querySelector(`[data-card-id="${c}"] .card-header-title`).textContent=l.content,a.reset(),v.close("#edit-card-modal"),y.success("Carte modifiée !")},addCardToListOnDOM(o){const a=document.querySelector(`[data-list-id="${o.list_id}"]`),l=document.getElementById("card-template").content.cloneNode(!0);l.querySelector(".card-header-title").textContent=o.content,l.querySelector(".card").dataset.cardId=o.id,l.querySelector(".card").dataset.listId=o.list_id,l.querySelector(".delete-card-button").addEventListener("click",()=>{this.handleDeleteCard(o.id)}),l.querySelector(".edit-card-button").addEventListener("click",()=>{document.querySelector("#edit-card-modal").dataset.cardId=o.id,v.open("#edit-card-modal")}),l.querySelector(".delete-card-button").addEventListener("click",()=>{document.querySelector("#delete-card-modal").dataset.cardId=o.id,v.open("#delete-card-modal")}),a.querySelector(".message-body").append(l)}},B={async handleDragAndDropList(){const o=document.querySelector("#lists-container");if(!o){console.error("Erreur : Le conteneur des listes (#lists-container) est introuvable !");return}new Sortable(o,{animation:150,ghostClass:"sortable-ghost",handle:".drag-button",onEnd:async a=>{document.querySelectorAll("[data-type='list']").forEach(async(l,n)=>{const m=n+1;console.log("listId :",l.dataset.listId),console.log("Nouvelle position :",m),l.dataset.position=m;try{await h.updateList(l.dataset.listId,{position:m})}catch(L){console.error("Erreur lors de la mise à jour de la position :",L)}}),y.success("Liste déplacée!")}})},async handleDragAndDropCard(){document.querySelectorAll(".message-body").forEach(a=>{new Sortable(a,{group:"shared",animation:150,handle:".drag-button",onEnd:async c=>{document.querySelectorAll("[data-type='card']").forEach(async(n,m)=>{const L=m+1,q=n.parentElement.dataset.listId;n.dataset.position=L,await h.updateCard(n.dataset.cardId,{list_id:q,position:L})}),y.success("Liste déplacée!")}})})}},_={init(){this.bind(),this.loadLists()},bind(){document.getElementById("add-list-button").addEventListener("click",()=>v.open("#add-list-modal")),document.querySelector("#add-list-modal form").addEventListener("submit",this.handleAddList.bind(this)),document.querySelector("#edit-list-modal form").addEventListener("submit",this.handleEditList.bind(this)),document.querySelector("#delete-list-modal form").addEventListener("submit",this.handleDeleteList.bind(this))},async loadLists(){const o=await h.getLists();if(o===null){y.error("Impossible de charger les listes !");return}o.forEach(a=>this.addListToDOM(a)),B.handleDragAndDropList(),B.handleDragAndDropCard()},async handleAddList(o){o.preventDefault();const a=o.currentTarget,c=Object.fromEntries(new FormData(a));c.position||(c.position=document.querySelectorAll('[data-type="list"]').length+1);const l=await h.createList(c);if(l===null){y.error("Impossible de créer la liste !");return}this.addListToDOM(l),v.close(),a.reset(),y.success("Liste créée!")},async handleEditList(o){o.preventDefault();const a=o.currentTarget,c=Object.fromEntries(new FormData(a)),l=document.querySelector("#edit-list-modal").dataset.listId,n=await h.updateList(l,c);if(n===null){y.error("Impossible de modifier la liste !");return}const m=document.querySelector(`[data-list-id="${l}"]`);m.querySelector('[slot="list-title"]').textContent=n.title,v.close(),a.reset(),y.success("Liste modifiée !")},async handleDeleteList(o){if(o.preventDefault(),o.currentTarget){const c=document.querySelector("#delete-list-modal").dataset.listId;try{if(await h.deleteList(c)===null)throw y.error("Impossible de supprimer la liste !"),new Error("Échec de la suppression de la liste.");const n=document.querySelector(`[data-list-id="${c}"]`);n&&n.remove(),v.close(),y.success("Liste supprimée !")}catch(l){console.error("Erreur lors de la suppression de la liste :",l),y.error("Impossible de supprimer la liste. Veuillez réessayer.")}}},addListToDOM(o){const c=document.getElementById("list-template").content.cloneNode(!0);c.querySelector('[slot="list-title"]').textContent=o.title,c.querySelector("section.message.is-info").dataset.listId=o.id,c.querySelector("section.message.is-info").dataset.position=o.position,c.querySelector(".message-body").dataset.listId=o.id,c.querySelector(".edit-list-button").addEventListener("click",()=>{document.querySelector("#edit-list-modal").dataset.listId=o.id,v.open("#edit-list-modal")}),c.querySelector(".delete-list-button").addEventListener("click",()=>{v.open("#delete-list-modal"),document.querySelector("#delete-list-modal").dataset.listId=o.id}),c.querySelector(".add-card-button").addEventListener("click",()=>{document.querySelector("#add-card-modal").dataset.listId=o.id,v.open("#add-card-modal")}),document.getElementById("lists-container").append(c),o.cards&&o.cards.forEach(l=>{H.addCardToListOnDOM(l)})}},J={init(){y.init(),v.init(),_.init(),H.init()}};document.addEventListener("DOMContentLoaded",J.init);
